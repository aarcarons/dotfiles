#!/bin/sh

SCRIPT_PATH="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

source $SCRIPT_PATH/brew
source $SCRIPT_PATH/dev_tools
source $SCRIPT_PATH/link
source $SCRIPT_PATH/settings

CMDNAME=`basename $0`
USAGE="Usage: $CMDNAME [ brew | export | install | import | link ]"
help() {
    echo $USAGE
    echo ""
    echo "Options:"
    echo "  brew:     Install/Update Homebrew packages"
    echo "  export:   Export settings"
    echo "  install:  Install necessary softwares and apply configurations"
    echo "  import:   Import settings"
    echo "  link:     Create/Update symlinks"
}

if [ $# -eq 0 ]; then
    echo "$USAGE" 1>&2
    exit 1
fi

while [ $# -gt 0 ]
do
    case $1 in
        brew)
            update_brew
            ;;
        export)
            export_settings
            ;;
        install)
            install_brew
            update_brew
            update_links
            import_settings
            install_fonts # iTerm uses Powerline font
            install bundler
            install_ohmyz
            ;;
        import)
            import_settings
            ;;
        link)
            update_links
            ;;
        -h)
            help
            exit 0
            ;;
        *)
            echo "$USAGE" 1>&2
            exit 1
    esac
    shift
done
